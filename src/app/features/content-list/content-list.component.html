<section class="content-list">
  <app-header></app-header>
  <div class="top">
    <div class="dropdown-container" #dropdownRef>
      <div class="dropdown-toggle" (click)="toggleDropdown()">
        {{ selectedExposures.length ? selectedExposures.join(', ') : 'Filter by exposure' }}
      </div>

      <div class="dropdown-menu" *ngIf="dropdownOpen">
        <label class="dropdown-option">
          <input type="checkbox" [checked]="isSelected('All')" (change)="toggleSelection('All')" />
          All
        </label>
        <label class="dropdown-option" *ngFor="let exposure of exposuresOptions">
          <input
            type="checkbox"
            [checked]="isSelected(exposure)"
            (change)="toggleSelection(exposure)"
            [disabled]="selectedExposures.includes('All')"
          />
          {{ exposure }}
        </label>
      </div>
    </div>

    <button class="btn" (click)="addItem()">Add +</button>
  </div>

  <div class="content">
      <div *ngFor="let expo of exposures">
        <app-exposure-item (exposureDeleted)="onExposureDeleted($event)" [exposure]="expo"></app-exposure-item>
      </div>
  </div>
</section>
<div class="add-exposure" *ngIf="addExposure">
  <div class="background">
    <div class="content">
      <h2 class="title">Set new exposure</h2>
      <form [formGroup]="form">
        <div>
          <label for="exposure">New Exposure</label>
          <input type="text" id="exposure"
                 placeholder="Set exposure..."
                 [formControl]="form.controls.exposure"
                 [ngClass]="{'input-error' : form.controls.exposure.invalid && submit}"
          >
        </div>
      </form>
      <div class="foot">
        <button class="cancel" (click)="closeForm()">Cancel</button>
        <button class="add" (click)="addNewExposure()">Add Exposure</button>
      </div>
    </div>
  </div>
</div>
